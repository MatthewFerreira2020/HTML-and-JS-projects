<!doctype html>
<title>Animation object</title>
<canvas width="1300" height="210"></canvas>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$( document ).ready(function() {
    console.log( "ready!" );
});
var miku =
{
  IMAGE: "sprites.png",
  SIZE: 40,
  numberOfFrames: 6,
  currentFrame: 0,
sourceX: 0,
sourceY: 0,
  updateAnimation: function()
  {
    this.sourceX = this.currentFrame * this.SIZE;
    this.sourceY = 0;
    if(this.currentFrame < this.numberOfFrames)
    {
      this.currentFrame++;
    }
    if(this.currentFrame == this.numberOfFrames)
    {
      this.currentFrame =0;
    }
}
 };
var canvas = document.querySelector("canvas");
var drawingSurface = canvas.getContext("2d");
var image = new Image();
image.addEventListener("load", loadHandler, false);
image.src = miku.IMAGE;
function loadHandler()
{
  updateAnimation();
}

    function updateAnimation()
   {
     setTimeout(updateAnimation, 300);
     miku.updateAnimation();
render(); }
   function render()
   {
     drawingSurface.clearRect(0, 0, canvas.width, canvas.height);
     drawingSurface.drawImage
     (
       image,
       miku.sourceX, miku.sourceY, miku.SIZE, miku.SIZE,
       0, 0, miku.SIZE, miku.SIZE
); }
</script>
